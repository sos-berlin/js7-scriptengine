class JS7JobArguments:
    def __init__(self):
        self.includedArguments = [js7.IncludableArgument.CREDENTIAL_STORE]

# --------------------------
# JS7Job with IncludableArgument
# --------------------------
class JS7Job(js7.Job):
    def __init__(self, jobEnvironment):
        super().__init__(jobEnvironment, declaredArguments = JS7JobArguments())
  
    def processOrder(self, step):
        csa = step.getIncludedArguments(js7.IncludableArgument.CREDENTIAL_STORE)

        if csa.getFile() is not None and csa.getFile().getValue() is not None:
            resolver = csa.newResolver()
            title = resolver.resolve("cs://@title")
            url = resolver.resolve("cs://@url")
            step.getLogger().info(f"title={title}, url={url}")

# --------------------------
# JS7JobWithoutIncludedArguments
# --------------------------
class JS7JobWithoutIncludedArguments(js7.Job):
    def __init__(self, jobEnvironment):
        super().__init__(jobEnvironment, declaredArguments = JS7JobArguments())
    
    def processOrder(self, step):
        csa = CredentialStoreArguments()
        csa.setFile("database.kdbx")
        csa.setPassword("password")
        csa.setEntryPath("/server/SFTP/localhost")
        # csa.setKeyFile("database.key")  # optional

        resolver = csa.newResolver()
        title = resolver.resolve("cs://@title")
        url = resolver.resolve("cs://@url")
        step.getLogger().info(f"title={title}, url={url}")
