import java
SSHProvider = java.type("com.sos.commons.vfs.ssh.SSHProvider")

class JS7JobArguments:
    def __init__(self):
        self.includedArguments = [js7.IncludableArgument.SSH_PROVIDER]

class JS7Job(js7.Job):
    def __init__(self, jobEnvironment):
        super().__init__(jobEnvironment, declaredArguments = JS7JobArguments())
  
    def processOrder(self, step):
        ssha = step.getIncludedArguments(js7.IncludableArgument.SSH_PROVIDER)
        sshProvider = SSHProvider.createInstance(step.getLogger(), ssha);
        
        try:
            sshProvider.connect()
            step.getLogger().info(f"[sshProvider.getServerInfo] {sshProvider.getServerInfo()}");

        except Exception as e:
            raise e 

        finally:
            sshProvider.disconnect()
 